/*!
* jQuery Smoove v0.2.7 (http://smoove.donlabs.com)
* Copyright (c) 2014 Adam Bouqdib
* Licensed under GPL-2.0 (http://abemedia.co.uk/license) 

NOTE -- modified to prevent firing a second time.
*/

!function(e,t,o){e.fn.smoove=function(t){return e.fn.smoove.init(this,e.extend({},e.fn.smoove.defaults,t)),this},e.fn.smoove.items=[],e.fn.smoove.loaded=!1,e.fn.smoove.defaults={offset:150,opacity:0,transition:"all 1s ease, opacity 1.5s ease",transformStyle:"preserve-3d",transformOrigin:!1,perspective:1e3},e.fn.smoove.init=function(s,a){function n(e,t,o){function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}for(var a=["webkit","moz","ms","o"],n={},r=0;r<a.length;r++)o&&(t=t.replace(o,"-"+a[r]+"-"+o)),n[s(a[r])+s(e)]=t;return n[e]=t,n}function r(o){for(var s=0;s<e.fn.smoove.items.length;s++){var a=e.fn.smoove.items[s],r=a.params,i=e(t).height(),f=!o||"down"===o&&"1"===a.css("opacity")?0:r.offset,c=e(t).scrollTop()+i-a.data("top");if("string"==typeof f&&f.indexOf("%")&&(f=parseInt(f)/100*i),"secondlast"==a[0].id&&console.log(c+" < "+f+" ? "+(f>c?"Y":"N")),f>c&&!a.hasClass("revealed")){r.opacity!==!1&&a.css({opacity:r.opacity});for(var l=[],v=["move","move3D","moveX","moveY","moveZ","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","skew","skewX","skewY"],m=0;m<v.length;m++)"undefined"!=typeof r[v[m]]&&(l[v[m]]=r[v[m]]);var d="";for(var p in l)d+=p.replace("move","translate")+"("+l[p]+") ";d&&(a.css(n("transform",d)),a.parent().css(n("perspective",r.perspective)),r.transformOrigin&&a.css(n("transformOrigin",r.transformOrigin)))}else a.hasClass("revealed")||a.css("opacity",1).addClass("revealed").css(n("transform",""))}}if(s.each(function(){var t=e(this),o=t.params=e.extend({},a,t.data());t.params.opacity=t.params.opacity/100,t.data("top",t.offset().top),o.transition=n("transition",o.transition,"transform"),t.css(o.transition),e.fn.smoove.items.push(t)}),!e.fn.smoove.loaded){e.fn.smoove.loaded=!0;var i,f=!1,c=0,l=e(t).height(),v=e(t).width(),m=e(o).height();e("body").width()===e(t).width()&&e("body").css("overflow-x","hidden"),e(t).resize(function(){clearTimeout(i),i=setTimeout(function(){var s=e(t).height(),a=e(t).width(),i=l>s?i="up":"down",f=e.fn.smoove.items;if(l=s,v!==a){for(var c=0;c<f.length;c++)f[c].css(n("transform","")).css(n("transition",""));var d=setInterval(function(){var s=e(o).height();if(s===m){t.clearInterval(d);for(var a=0;a<f.length;a++)f[a].data("top",f[a].offset().top),f[a].css(f[a].params.transition);r(i)}m=s},500)}else r(i);v=a},500)}),e(t).on("load",function(){r(),e(t).scroll(function(){f=!0}),setInterval(function(){if(f){f=!1;var o=e(t).scrollTop(),s=c>o?s="up":"down";c=o,r(s)}},250)})}}}(jQuery,window,document);